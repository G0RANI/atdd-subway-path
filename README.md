# 🚀 1단계 - 구간 추가 요구사항 반영

# 요구사항

- 사용자 스토리를 기반으로 기능 요구사항(완료 조건)이 도출되었습니다.
- 완료 조건을 검증할 수 있는 인수 조건을 시나리오 형태로 도출하세요.
- 인수 조건을 검증하는 **인수 테스트**를 작성하세요.



모든 경우의 수를 검증하는 인수 조건을 만들 필요는 없습니다. 미션의 목표는 기능을 완벽하게 구현하는 것이 아니라 TDD 사이클을 경험하는 것 입니다.

## 사용자 스토리

```plaintext
사용자로서
지하철 노선도를 조금 더 편리하게 관리하기위해
위치에 상관없이 지하철 노선에 역을 추가 할 수 있다
```

## 기능 요구사항(완료 조건)

- 노선에 역 추가시 노선 가운데 추가 할 수 있다.
- 노선에 역 추가시 노선 처음에 추가 할 수 있다.
- 이미 등록되어있는 역은 노선에 등록될 수 없다.

## 프로그래밍 요구사항

- 인수 테스트 주도 개발 프로세스

  에 맞춰서 기능을 구현하세요.

    - `요구사항 설명`을 참고하여 인수 조건을 정의
    - 인수 조건을 검증하는 인수 테스트 작성
    - 인수 테스트를 충족하는 기능 구현

- 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성하세요.

    - 뼈대 코드의 인수 테스트를 참고

# 힌트



힌트 외에도 필요한 상황에 대한 요구사항 고려해서 구현해주세요.

### 노선에 역 추가시 노선 가운데 추가 할 수 있다.

- 기존 구간의 역을 기준으로 새로운 구간을 추가
    - 기존 구간 A-C에 신규 구간 A-B를 추가하는 경우 A역을 기준으로 추가
    - 기존 구간과 신규 구간이 모두 같을 순 없음(아래 예외사항에 기재됨)
    - 결과로 A-B, B-C 구간이 생김
- 새로운 길이를 뺀 나머지를 새롭게 추가된 역과의 길이로 설정
  ![image.png](https://nextstep-storage.s3.ap-northeast-2.amazonaws.com/be71b2febc0c4d179c6606f9fe1a473b)



# TODO

#### 인수테스트

- [ ] GIVEN 지하철 노선을 생성하고</br>
  WHEN 지하철 노선 시작에 구간을 추가하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 생성하고</br>
  WHEN 지하철 노선 끝에 구간을 추가하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 생성하고</br>
  WHEN 지하철 노선 중간에 구간을 추가하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 생성하고</br>
  WHEN 지하철 노선에 이미 추가된 구간을 추가하면</br>
  THEN 에러 처리와 함께 '이미 추가된 구간입니다.' 라는 메세지가 출력된다

#### 단위테스트

- [x] case 1:  추가 되는 구간의 시작점이 모든 구간에 등록이 안되어 있을때
    1. 맨 처음 구간에 해당 구간 추가 but 추가 할 구간의 끝점이 기존 첫번째 구간 시작점과 일치 해야함
    2. 맨 처음 구간에 해당 구간 추가 그리고 새로운 구간이 생성되며 추가되는 구간의 시작점과 기존 시작 구간의 시작지점이 새로운 구간으로 추가 등록? -> 새로 추간되는 구간의 길이를 알 수 없음으로 불가
    3. 전체 라인의 길이 증가

- [ ] case 2: 추가 되는 구간의 시작점이 어느 한 구간의 시작점과 일치 (중간에 추가)
    1. 일치 하는 구간의 종료점은 추가하는 구간의 시작점으로 변경
    2. 새로 추가 되는 구간의 끝점과 일치하는 구간의 끝점으로 구간 추가
    3. 기존 구간의 길이는 추가되는 구간의 길이를 뺀다
    4. 전체 라인의 길이는 변화 없음
    5. 더하는 구간의 길이는 전체 라인의 길이보다 작아야한다

- [x] case 3: 추가 되는 구간의 시작점이 등록된 구간들중에 마지막 구간의 끝점과 일치
    1. 기존과 같게 마지막에 추가
    2. 전체 라인의 길이 증가
