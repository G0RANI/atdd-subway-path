# 🚀 # 2단계 - 구간 제거 요구사항 반영

# 요구사항

- 사용자 스토리를 기반으로 기능 요구사항(완료 조건)이 도출되었습니다.
- 완료 조건을 검증할 수 있는 인수 조건을 시나리오 형태로 도출하세요.
- 인수 조건을 검증하는 **인수 테스트**를 작성하세요.



모든 경우의 수를 검증하는 인수 조건을 만들 필요는 없습니다. 미션의 목표는 기능을 완벽하게 구현하는 것이 아니라 TDD 사이클을 경험하는 것 입니다.

## 사용자 스토리

```plaintext
사용자로서
지하철 노선도를 조금 더 편리하게 관리하기위해
위치에 상관없이 지하철 노선에 역을 제거 할 수 있다
```

## 기능 요구사항(완료 조건)

- 노선에 등록된 역 제거 시 해당 역이 노선 가운데 있어도 제거할 수 있다.
- 노선에 등록된 역 제거 시 해당 역이 상행 종점역이어도 제거할 수 있다.

## 프로그래밍 요구사항

- 인수 테스트 주도 개발 프로세스

  에 맞춰서 기능을 구현하세요.

  - `요구사항 설명`을 참고하여 인수 조건을 정의
  - 인수 조건을 검증하는 인수 테스트 작성
  - 인수 테스트를 충족하는 기능 구현

- 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성하세요.

  - 뼈대 코드의 인수 테스트를 참고

# 힌트



힌트 외에도 필요한 상황에 대한 요구사항 고려해서 구현해주세요.

### 노선에 등록된 역 제거 시 해당 역이 노선 가운데 있어도 제거할 수 있다.

- 기존에는 마지막 역 삭제만 가능했는데 위치에 상관 없이 삭제가 가능하도록 수정
- 종점이 제거될 경우 다음으로 오던 역이 종점이 됨
- 중간역이 제거될 경우 재배치를 함
  - 노선에 A - B - C 역이 연결되어 있을 때 B역을 제거할 경우 A - C로 재배치 됨
  - 거리는 두 구간의 거리의 합으로 정함

![image.png](https://nextstep-storage.s3.ap-northeast-2.amazonaws.com/a8751b272c36421481c779e5a743a928)


# TODO

#### 인수테스트

- [ ] GIVEN 지하철 노선을 생성하고 구간을 추가 후</br>
  WHEN 시작역을 삭제 하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 생성하고 구간을 추가 후</br>
  WHEN 마지막 역을 삭제 하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 생성하고 구간을 추가 후</br>
  WHEN 중간 역을 삭제 하면</br>
  THEN 수정된 구간을 조회 할 수 있다

- [ ] GIVEN 지하철 노선을 시작과 끝만 생성하고</br>
  WHEN 시작 지하철 역 제거를 시도하면</br>
  THEN 에러 처리와 함께 '구간이 하나 일 때는 삭제를 할 수 없습니다' 라는 메세지가 출력된다

- [ ] GIVEN 지하철 노선을 시작과 끝만 생성하고</br>
  WHEN 마지막 지하철 역 제거를 시도하면</br>
  THEN 에러 처리와 함께 '구간이 하나 일 때는 삭제를 할 수 없습니다' 라는 메세지가 출력된다

#### 단위테스트

- [ ] case 1:  등록되어 있는 구간 중 가장 처음 시작 되는 상행역을 삭제하는 경우
    1. 시작구간의 상행역과 삭제 하려는 역이 일치 해야 삭제 가능
    2. 전체 길이에서 시작구간만큼의 길이 차감 

- [ ] case 2: 등록되어 있는 구간 중 가장 마지막 하행 되는 역을 삭제하는 경우
    1. 종료구간의 하행역과 삭제 하려는 역이 일치 해야 삭제 가능
    2. 전체 길이에서 종료구간만큼의 길이 차감

- [ ] case 3: 등록되어 있는 구간 중 중간에 등록되어 있는 역을 삭제하는 경우
    1. 종료구간을 제외한 모든 구간의 하행역중에 일치 하는 역이 있는 경우
    2. 변경 비지니스 로직
       1. 해당 일치하는 역을 가진 2개의 양쪽 구간을 추출
       2. 하행역이 일치 하는 구간을 다음 구간의 하행역으로 변경
       3. 해당 구간과 다음 구간의 길이 만큼 증가
       4. 다음 구간 삭제 처리

- [ ] case 4: 삭제 되는 역을 찾지 못하는 경우
    1. '삭제하려는 역을 찾지 못했습니다.' 라는 메세지와 함께 종료

- [ ] case 5: 구간이 하나 일 때 시작 지하철 역을 삭제 하는 경우
  1. '구간이 하나 일 때는 삭제를 할 수 없습니다.' 라는 메세지와 함께 종료

- [ ] case 6: 구간이 하나 일 때 마지막 지하철 역을 삭제 하는 경우
  1. '구간이 하나 일 때는 삭제를 할 수 없습니다.' 라는 메세지와 함께 종료
